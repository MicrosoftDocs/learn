In this exercise, you explore multiple, real world scenarios that highlight the benefits and value of Copilot in Microsoft Entra.

> [!NOTE]
> The environment for this exercise is a simulation generated from the product. As a limited simulation, links on a page may not be enabled and text-based inputs that fall outside of the specified script may not be supported. A pop-up message will display stating, "This feature is not available within the simulation." When this occurs, select OK and continue the exercise steps.  
>:::image type="content" source="../media/simulation-pop-up-error.png" alt-text="Screenshot of pop-up screen indicating that this feature is not available within the simulation.":::
>
> Also, Microsoft Security Copilot was previously referred to as Microsoft Copilot for Security. Throughout this simulation, you'll find that the user interface still reflects the original name.

### Exercise

This exercise consists of four independent tasks that explore the capabilities of Security Copilot in Microsoft Entra.

This exercise should take approximately **30** minutes to complete.

> [!NOTE]
> When a lab instruction calls for opening a link to the simulated environment, it's recommended that you open the link in a new browser window so that you can simultaneously view the instructions and the exercise environment. To do so, select the right mouse key and select the option.

### Task: Research and remediation of risky users with copilot in Microsoft Entra

You're an identity admin with Woodgrove. You believe there are some users at the company that might have been compromised by phishing attacks. You want to use Copilot in Microsoft Entra to review any risky users. If you find any, you can use Copilot to help you remediate the issue and prevent future occurrences. The primary user you suspect at being compromised is Serena Markunaite.

1. Open the simulated environment by selecting this link: **[Microsoft Entra admin center](https://app.highlights.guide/start/3d46b3b8-e0cc-4fad-95dc-1018bc8feafc&azure-portal=true)**.
1. From the menu on the left, scroll down and open the Protection menu.
1. Select Identity Protection from the submenu. 
    1. We want to use the Dashboard to look at the Number of high risk users chart. Notice there have been risky users detected.
1. Let’s do some research on those Risky Users.
1. Select the Copilot button from the top right of the screen.
1. Take a moment to review the sample prompts that are provided in Copilot.

1. Enter the prompt “Show me my most recent risky users” and select the arrow.
1. Note, the user we were concerned about (Serena) is in the list.
1. Look at the bottom of the Copilot response for a link to the Risky Users report.
1. Select the link “Risky Users report in Entra ID Protection.”
1. Select Serena Markunaite from the list of Risky Users.
    1. This opens a Copilot autogenerated user risk summary. Note you now have a specific reason why Serena is at elevated risk.
    1. Also note there are recommendations on what to do.
1. We need to dig a little deeper and see if we can track this risky user behavior. Have they performed activities outside of their normal usage?
1. In the Copilot dialog open on the right side of the screen, enter the prompt “Show me the sign ins for the user one day before and after the alert. ”
    1. Note the failed user sign in attempt then some immediate successful attempts from an alternate IP-address. Looks like suspicious behavior. 
    1. Just resetting a password or MFA may not be enough if an attacker has logged into the system. Let’s check to see if any changes have been made to the MFA settings recently.
1. Enter the Copilot prompt “What MFA methods are available for this user?
    1. Note the company MFA standard of Password plus Authenticator are still set.
1. We have researched the issue and gathered the needed information. Now is time to plan for remediation of attacker-in-the-middle style attacks.
1. Ask copilot for recommendations with the prompt “What should I do to remediate this attacker-in-the-middle threat?”
1. Scroll up in the copilot window to review the entire response.
    1. Copilot response includes ways to remediate the current issues. However, notice that you're also provided with recommendations to secure for future attacks.
1. There's a suggestion to use Conditional Access policies to protect this user. Use Copilot for find out more. 
1. Enter the prompt “Can I use risk based conditional access policy to automate response to these detections?”
    1. Note that you can use Conditional Access policies.
1. Ask Copilot to give you step by step instructions to set this up with the prompt “How would I create a sign in risk based conditional access policy for this user?”
    1. Review the steps provided.
    1. NOTE – the instruction generated are for a single user policy. Microsoft doesn't recommend that you make a policy for each user, but to create them using security groups to help with maintenance.
1. Close the browser (simulated environment), as it will not be applicable for the subsequent task.

**Review**: You have completed this lab simulation. Remember how you were able to quickly use Copilot to get a list of Risky users, research their identity based activities, check to see if the account appeared compromised, and find a remediation path. Copilot embedded for Microsoft Entra is a power tool to support your identity and access administrative tasks.

#### Task: Using Security Copilot in Microsoft Entra to troubleshoot access

You're an identity admin with Woodgrove. You're a member of the helpdesk, and just got a request to help a user with a sign in challenge. You have a user that is required to use phone-based MFA to access the site. However, they're working from a location that doesn't allow phones. You can use copilot to help investigate the user sign in attempt, and see if other worrisome attempts have happened recently. Then research how to quickly resolve the user sign in challenge. The user is Khamala Ervello.

1. Open the simulated environment by selecting this link: **[Microsoft Entra admin center](https://app.highlights.guide/start/c07ee752-8668-4ff3-a53f-202ff9a945ef&azure-portal=true)**.
1. Select the Security Copilot button in the upper right of the screen.
1. Enter the prompt “Tell me more about kher40@woodgrove.ms” to get details on Khamala.
    1. Note the details that Khamala is a valid user and should have access.
1. We need to research the failed sign in attempt. Use the prompt “Show me kher40@woodgrove.ms most recent failed sign in‌” to get a view into sign in failure.
    1. Notice that the exact failure the user described did happen, MFA timeout.
    1. Can we check to see if there's any other suspicious activity?
1. Enter the prompt in Security Copilot “Was there any unusual or risky behaviors for kher40@woodgrove.ms sign in attempt?”
    1. We don't see any risky or unusual behavior for this user.
    1. Can we help them get logged in, so they can work?
1. Check to see what MFA methods are available at Woodgrove with the prompt “Which authentication methods are considered MFA”
    1. Note the list of available MFA methods and the provided links to research their value and strength.
1. FIDO2 passkey is the most secure option. I wonder if Khamala is registered for FIDO2.
1. Check with Copilot using the prompt “Is kher40@woodgrove.ms registered for FIDO2 authentication?‌”
    1. The user is not set up for FIDO2, can we get them set up for passwordless?
1. Ask copilot how to set this up with the prompt “How would I go about getting kher40@woodgrove.ms set up for passwordless authentication?”
1. Review the step provide by Security Copilot to help Khamala set up passwordless sign in, so this issue is resolved. 
1. Close the browser (simulated environment), as it will not be applicable for the subsequent task.

**Review**: Security Copilot in Microsoft Entra is your companion at the helpdesk. With a few simple prompts you can confirm a user’s role in the company, research that their account is not showing risky activities, and help them resolve sign in issues.

#### Task: Remediating app security issues with Security Copilot in Microsoft Entra

You're an identity admin with Woodgrove. Your company has used many enterprise applications over the years, and some are no longer used. Your job is to track down unused application in your Microsoft Entra tenant, and remove them. You should research if there's any suspicious activity associated with the apps or their data as part of the work. Security Copilot in Microsoft Entra can help.

1. Open the simulated environment by selecting this link: **[Microsoft Entra admin center](https://app.highlights.guide/start/104c6555-1915-48d6-a05e-0783017959a0&azure-portal=true)**.
1. Review the data provided on the Microsoft Entra dashboard displayed.
1. Find the section on Your Identity Secure Score.
    1. Note there are recommendations  on how you can make your tenant even more secure.
    1. Notice one of the items is “Removed unused application.”
1. Select the Security Copilot button on the upper right of the screen.
1. Use the prompt “Show me unused applications” to find any unused applications.
    1. Review the list of apps.
1. It would be great to know who owns those apps.
1. Enter the prompt “Who are the owners of the service principals associated with these apps?” to find the owners.
    1. Note that many of them don’t have owners.
1. Let’s ask copilot how to remove the apps with the prompt “How do I remove these? ”
1. Review the steps provided to remove the application manually using the Microsoft Entra admin center or view PowerShell scripts.
1. Scroll up in the Copilot windows to see the list of apps again.
1. Find the application called Woodgrove Intranet, and then copy the owner’s name into your clipboard: Braden Goudy (Corp). 
1. Close the Security Copilot window for now.
1. Select the Favorites menu from the menu on the left side of the screen.
    1. Favorites is a great place to store your most commonly used tools.
1. Select Risky activities from the list.
    1. Alternatively, you can open the Protection portion of the left menu and choose Risky Activities from the menu.
1. Find Braden’s name on the list and notice that he is At Risk.
1. Select his name to open a Security Copilot summary of the risky behavior.
    1. There are several unfamiliar sign-in attempts in their history.
1. Review the suggestions on how to mitigate any risks posed by the user.
1. Close the browser (simulated environment), as it will not be applicable for the subsequent task.

**Review**: In this simulation, you used Security Copilot to help you quickly identify unused applications and their owners. You were able to find the step-by-step instructions to remove them from your system. Additionally, you noticed one of the applications had an odd name and service principal. With this information, you were able to review the application owner’s usage and find some potential risky behavior.

#### Task: XXXXXXXXXXXXXXXXX

You're an identity admin with Woodgrove. You have been advised that the user Rovshan Hasanli might have some strange behavior when connecting to the Woodgrove site. You want to use the Audit Logs to research the activities.

1. Open the simulated environment by selecting this link: **[Microsoft Entra admin center](https://app.highlights.guide/start/fdc34222-f2a2-4eb6-a8d0-b1085754e463&azure-portal=true)**.
1. In the upper right side of the screen select the Security Copilot button.
1. Let’s start with a simple prompt like “Tell me about user Rovshan Hasanli.”
1. We need to find out information about the user from the Audit Logs. Use the prompt “Show me Microsoft Entra audit log events initiated by that user in the last week” to find more information.
    1. Review the information about User Administrator role being assigned in PIM.
1. Let’s check the user’s sign-in with the prompt “Show me sign-ins from that user.”
    1. It's unusual that a user whose account is disabled has been able to sign-in and use PIM.
1. Scroll up in the Security Copilot window to the find the link “User Management Page ” from the first query we did in Security Copilot.
1. Select the link “User Management page.”
    1. Alternatively, you can navigate to the All Users page by going to the left side menu and picking Identity -> Users -> All Users.
1. Select both to Search the users and enter Lynne.
1. Select Rovshan Hasanli account. 
    1. Note the account is Disabled in the Account status.
1. Return to the Security Copilot windows and scroll to the link “Audit Logs page.”
1. Select the link Audit Logs page.
    1. Alternatively, you can navigate to the page from the left side menu by going to Identity -> Monitoring & health -> Sign-in logs.
1. When the page opens select the Add filters button.
1. Choose the Initiated by (actor)  from the filter, then choose Apply.
    1. There are about 15 activities performed by Rovshan.
1. Again return to the Security Copilot windows and find the link “Sign-in events page.”
1. Select the link “Sign-in events page.”
    1. Alternatively, you can navigate to the page from the left side menu by going to Identity  Monitoring & health  Sign-in logs.
1. When the page opens select the Add filters button.
1. Choose User from the list, then select Apply.
    1. Review the list of sign-in attempts.
1. **MISSING STEPS????**

**Review** XXXXXXXXXXXXXXXX